<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Short Tutorial • trackter</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Short Tutorial">
<meta property="og:description" content="trackter">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">trackter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/image_processing.html">Video and Image Processing</a>
    </li>
    <li>
      <a href="../articles/kin_functions.html">Image Analysis</a>
    </li>
    <li>
      <a href="../articles/kinematic_analysis.html">Kinematic Analysis</a>
    </li>
    <li>
      <a href="../articles/tutorial.html">Short Tutorial</a>
    </li>
    <li>
      <a href="../articles/visualization.html">Vizualization</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="tutorial_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Short Tutorial</h1>
            
      
      
      <div class="hidden name"><code>tutorial.Rmd</code></div>

    </div>

    
    
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The release version of <em>trackter</em> can be installed with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"trackter"</span><span class="op">)</span></code></pre></div>
<p>The current development version can be installed with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">    <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/">devtools</a></span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"ckenaley/trackter"</span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va">trackter</span><span class="op">)</span></code></pre></div>
</div>
<div id="external-dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#external-dependencies" class="anchor"></a>External dependencies</h2>
<p>The core functions of <em>trackter</em> that extract shape and contour data from images (the <code>kin</code> functions: <code>kin.simple</code>, <code>kin.search</code>, and <code>kin.free</code>) depend upon <em>EBImage</em>, available on the Bioconductor repository. The current build and development versions of <em>trackter</em> install this dependency. If it does not install, it can be done so easily with just a few lines of code:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span><span class="op">(</span><span class="st">"BiocManager"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
   <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"BiocManager"</span><span class="op">)</span>
   <span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/BiocManager/man/install.html">install</a></span><span class="op">(</span><span class="st">"EBImage"</span><span class="op">)</span></code></pre></div>
<p><em>trackter</em> also contains several functions for image and video processing. These functions depend on the popular <code>FFmpeg</code> package and it must be installed if the user intends to use them. Installation is platform-dependent. I found the <a href="https://trac.ffmpeg.org/wiki/CompilationGuide"><code>FFmpeg</code> wiki installation and compilation guide to be quite useful</a>.</p>
</div>
<div id="features" class="section level2">
<h2 class="hasAnchor">
<a href="#features" class="anchor"></a>Features</h2>
<p><strong>Automated kinematic analysis</strong></p>
<ul>
<li>Fast and accurate contour and shape analysis of ROIs.</li>
<li>ROI detection with search parameters including position and size.</li>
<li>Relevant functions: <code>kin.search</code> and <code>kin.simple</code>.</li>
</ul>
<p><strong>Tools for kinematic analysis of swimming animals</strong></p>
<ul>
<li>Calculate midline (propulsive) wavelength, trailing-edge frequency, paired-fin position.</li>
<li>Relevant functions: <code>amp.freq</code>, <code>halfwave</code>, <code>wave</code>, and <code>fin.kin</code>
</li>
</ul>
<p><strong>Tools for image and video processing using FFmpeg</strong></p>
<ul>
<li><p>Access <code>FFmpeg</code> functionality, including filters and codecs, to extract frames, stitch videos, and edit images and videos.</p></li>
<li><p>Relevant functions: <code>images.to.videos</code>, <code>images.to.videos2</code>, <code>vid.to.images</code>, and <code>vid.to.images2</code></p></li>
</ul>
<p><strong>Other miscellaneous, low-level tools for kinematic analysis</strong></p>
<ul>
<li>Compute distances in 2d space, angles, heading/bearing, convert radians to degrees and vice versa.</li>
<li>Relevant functions: <code>dist.2d</code>, <code>cosine.ang</code>, <code>bearing.xy</code>, <code>deg</code>, <code>rad</code>
</li>
</ul>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">trackter</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span></code></pre></div>
<div id="analyzing-a-single-image" class="section level3">
<h3 class="hasAnchor">
<a href="#analyzing-a-single-image" class="anchor"></a>Analyzing a single image</h3>
<p><em>trackter</em> was developed to analyze image data from videos of swimming organisms, although any object in an image field has potential for analysis. Here, we start by accessing an image of a swimming fish included with the package in a directory named “img” and displaying it.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata/img"</span>,<span class="st">"sunfish_BCF.jpg"</span>,package<span class="op">=</span><span class="st">"trackter"</span><span class="op">)</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">EBImage</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/EBImage/man/io.html">readImage</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span>

<span class="fu">EBImage</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/EBImage/man/display.html">display</a></span><span class="op">(</span><span class="va">y</span>,method<span class="op">=</span><span class="st">"raster"</span><span class="op">)</span></code></pre></div>
<p><img src="tutorial_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Here, <code>kin.simple</code> is used to extract contour and shape information from the image above by referring to the directory that contains it. An image with a midline overlay is saved to the working directory (see below).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,<span class="st">"img"</span>,package<span class="op">=</span><span class="st">"trackter"</span><span class="op">)</span>

<span class="va">im</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata/img"</span>, package <span class="op">=</span> <span class="st">"trackter"</span><span class="op">)</span>,full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">im</span><span class="op">&lt;-</span> <span class="va">im</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"sunfish.jpg"</span>,<span class="va">im</span><span class="op">)</span><span class="op">]</span>
<span class="va">im.dir</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">"/images"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="va">im.dir</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in dir.create(im.dir): '/Users/biology/Documents/R.scripts/trackter/
## vignettes/images' already exists</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.copy</a></span><span class="op">(</span><span class="va">im</span>,<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">im.dir</span>,<span class="st">"/"</span>,<span class="fu"><a href="https://rdrr.io/r/base/basename.html">basename</a></span><span class="op">(</span><span class="va">im</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kin.y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/kin.search.html">kin.simple</a></span><span class="op">(</span>image.dir <span class="op">=</span> <span class="va">im.dir</span>,save<span class="op">=</span><span class="cn">TRUE</span>,out.dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: `data_frame()` was deprecated in tibble 1.1.0.
## Please use `tibble()` instead.</code></pre>
<p>The <code>kin</code> functions in <em>trackter</em> return a list of data tables/data frames:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">kin.y</span>,<span class="va">class</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## $kin.dat
## [1] "data.table" "data.frame"
## 
## $midline
## [1] "data.table" "data.frame"
## 
## $cont
## [1] "data.table" "data.frame"
## 
## $cont.sm
## [1] "data.table" "data.frame"
## 
## $mid.pred
## [1] "data.table" "data.frame"
## 
## $all.classes
## [1] "data.table" "data.frame"
## 
## $dim
## [1] "integer"</code></pre>
<p>Most will be interested in the “kin.dat” and “midline” data for the calculation of body position parameters (e.g., amplitude, wavelength, etc.). For example, the “kin.dat” table includes, among other things, frame-specific trailing-edge (rightmost) amplitude (“x”, “y”), head (leftmost) position (“head.x”, “head.y”) which may be used to calculate position and trailing-edge amplitude.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">kin.y</span><span class="op">$</span><span class="va">kin.dat</span><span class="op">)</span></code></pre></div>
<pre><code>##    frame roi   x        y head.x   head.y       amp head.pval
## 1:     0   a 754 175.5444     22 131.5611  40.08771 0.1743595
## 2:     1   a 868 198.8922     66 285.7500 -72.60059 0.9967486</code></pre>
<p>The “midline” table is composed of frame-specific midline data, including, among other things, calculated midline position (“y”), smoothed midline position (“y.sm”) and midline position relative to the head (“wave.y”). Here we see the difference between them.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">kin.y</span><span class="op">$</span><span class="va">midline</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##    frame roi n  x        y     y.sm     wave.y      per.bl
## 1:     0   a 1 15 131.0000 132.1384 -0.4828577 0.000000000
## 2:     0   a 2 16 131.0000 132.1560 -0.4681818 0.001315830
## 3:     0   a 3 17 134.0000 132.1742 -0.4529716 0.002631672
## 4:     0   a 4 18 128.0000 132.1928 -0.4373000 0.003947525
## 5:     0   a 5 19 137.2500 132.2118 -0.4212398 0.005263388
## 6:     0   a 6 20 127.3333 132.2312 -0.4048641 0.006579259</code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ml</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/melt.data.table.html">melt</a></span><span class="op">(</span><span class="va">kin.y</span><span class="op">$</span><span class="va">midline</span><span class="op">[</span>,<span class="fu">.</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,<span class="va">y.sm</span>,<span class="va">wave.y</span><span class="op">)</span><span class="op">]</span>,<span class="st">"x"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/qplot.html">qplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">ml</span>,x<span class="op">=</span><span class="va">x</span>,y<span class="op">=</span><span class="va">value</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="va">variable</span><span class="op">~</span><span class="va">.</span><span class="op">)</span></code></pre></div>
<p><img src="tutorial_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>When “save=TRUE”, the <code>kin</code> functions write images to a user-defined directory that include midline overlays.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y2</span> <span class="op">&lt;-</span> <span class="fu">EBImage</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/EBImage/man/io.html">readImage</a></span><span class="op">(</span><span class="st">"sunfish_000.jpg"</span><span class="op">)</span>
<span class="fu">EBImage</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/EBImage/man/display.html">display</a></span><span class="op">(</span><span class="va">y2</span>,method<span class="op">=</span><span class="st">"raster"</span><span class="op">)</span></code></pre></div>
<p><img src="tutorial_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#clean up</span>
<span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span><span class="va">im.dir</span>,recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div id="analyzing-a-video-and-multiple-images" class="section level3">
<h3 class="hasAnchor">
<a href="#analyzing-a-video-and-multiple-images" class="anchor"></a>Analyzing a video and multiple images</h3>
<p>Of course, the primary utility of automated tracking routines is to process many images (i.e., frames). The <code>kin</code> functions analyze all the images in a subdirectory and assume they are ordered by a numbered suffix. One can use the <code>FFmpeg</code> wrappers <code>vid.to.images</code> or <code>vid.to.images2</code> to extract a numbered sequence from a video. Users may otherwise produce an image sequence from their videos using other software (e.g., ImageJ). Here, <code>vid.to.images</code> extracts images from a video in the package’s “vid” directory of a swimming fish to a new directory named “img2”.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#construct video file path</span>
<span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata/vid"</span>,<span class="st">"sunfish_BCF_red.avi"</span>,package<span class="op">=</span><span class="st">"trackter"</span><span class="op">)</span>

<span class="co">#create new directory to store images</span>
<span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">"/img2"</span><span class="op">)</span><span class="op">)</span>

<span class="co">#extract images from video and output to new "img2" directory</span>
<span class="fu"><a href="../reference/vid.to.images.html">vid.to.images</a></span><span class="op">(</span><span class="va">v</span>,out.dir<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">"/img2"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The images are then passed through <code>kin.simple</code>. The threshold value for segmenting is set automatically. The head section (“ant.per”) set to 0.2 in this case.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">kin.y2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/kin.search.html">kin.simple</a></span><span class="op">(</span>image.dir<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">"/img2"</span><span class="op">)</span>,ant.per <span class="op">=</span> <span class="fl">0.2</span>,save <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co">#clean up</span>
<span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">"/img2"</span><span class="op">)</span>,recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Now we can have a look at trailing-edge position and amplitude (relative to the head path) across the frames.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#position</span>
<span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/qplot.html">qplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">kin.y2</span><span class="op">$</span><span class="va">kin.dat</span>,x<span class="op">=</span><span class="va">frame</span>,y<span class="op">=</span><span class="va">y</span><span class="op">)</span></code></pre></div>
<p><img src="tutorial_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#amplitude relative to a theoretical midline established by head</span>
<span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/qplot.html">qplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">kin.y2</span><span class="op">$</span><span class="va">kin.dat</span>,x<span class="op">=</span><span class="va">frame</span>,y<span class="op">=</span><span class="va">amp</span><span class="op">)</span> </code></pre></div>
<p><img src="tutorial_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<p>The midline data can be accessed to assess the waveform. Here, midline x position is standardized.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kin.y2</span><span class="op">$</span><span class="va">midline</span><span class="op">[</span>,<span class="va">x2</span><span class="op">:=</span><span class="va">x</span><span class="op">-</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,by<span class="op">=</span><span class="va">frame</span><span class="op">]</span>

<span class="co">#waveform plot</span>
<span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/qplot.html">qplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">kin.y2</span><span class="op">$</span><span class="va">midline</span>,x<span class="op">=</span><span class="va">x2</span>,y<span class="op">=</span><span class="va">wave.y</span>,col<span class="op">=</span><span class="va">frame</span><span class="op">)</span></code></pre></div>
<p><img src="tutorial_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
</div>
<div id="downstream-analyses-of-kinematic-data" class="section level3">
<h3 class="hasAnchor">
<a href="#downstream-analyses-of-kinematic-data" class="anchor"></a>Downstream analyses of kinematic data</h3>
<p><em>trackter</em> supplies several functions for downstream analysis of kinematic data extracted from image frames. For instance, <code>half.wave</code> computes the midline half wavelength (i.e., propulsive wavelength in pixels) from a data table of x and y position data. These and other functions are intended for use with output from the <code>kin</code> functions.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/halfwave.html">halfwave</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">kin.y</span><span class="op">$</span><span class="va">midline</span><span class="op">$</span><span class="va">x</span>,y<span class="op">=</span><span class="va">kin.y</span><span class="op">$</span><span class="va">midline</span><span class="op">$</span><span class="va">wave.y</span>,method<span class="op">=</span><span class="st">"zeros"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span></code></pre></div>
<pre><code>## $method
## [1] "zeros"
## 
## $names
##               x            y wave
##    1:  50.68485 0.0004549743    1
##    2:  50.73983 0.0009528502    1
##    3:  50.79481 0.0014499721    1
##    4:  50.84980 0.0019463405    1
##    5:  50.90478 0.0024419560    1
##   ---                            
## 1405: 127.88288 0.0027960213    1
## 1406: 127.93786 0.0021519574    1
## 1407: 127.99285 0.0015075328    1
## 1408: 128.04783 0.0008627701    1
## 1409: 128.10282 0.0002176918    1
## 
## $dat
##    wave zeros wave.begin wave.end begin.index end.index        l      amp1 amp2
## 1:    1   650   50.68485 127.1578         650      2058 77.47295 0.1879444   NA
##        pos1 pos2
## 1: 96.37684   NA</code></pre>
<p>Using a “zeros” method, <code>half.wave</code> determines two half waves from the ROI in the single image above, described in the “dat” table from the output. The “names” table can be used to visualize the half wavelengths.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/qplot.html">qplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">w</span><span class="op">$</span><span class="va">names</span>,x<span class="op">=</span><span class="va">x</span>,y<span class="op">=</span><span class="va">y</span>,col<span class="op">=</span><span class="va">wave</span><span class="op">)</span></code></pre></div>
<p><img src="tutorial_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
<p>We could extend this framework using <code>data.table</code> to calculate half waves in each of the 11 frames from the example video.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"> <span class="va">wave.dat</span> <span class="op">&lt;-</span> <span class="va">kin.y2</span><span class="op">$</span><span class="va">midline</span><span class="op">[</span>, <span class="op">{</span> <span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/halfwave.html">halfwave</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">wave.y</span>,method<span class="op">=</span><span class="st">"zeros"</span><span class="op">)</span><span class="op">$</span><span class="va">dat</span>;
 <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>l<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">w</span><span class="op">$</span><span class="va">l</span><span class="op">)</span>,
    amp<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">w</span><span class="op">$</span><span class="va">amp1</span><span class="op">)</span>,
    pos<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">w</span><span class="op">$</span><span class="va">pos1</span><span class="op">)</span>,
    start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">w</span><span class="op">$</span><span class="va">wave.begin</span><span class="op">)</span>,
    end<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">w</span><span class="op">$</span><span class="va">wave.end</span><span class="op">)</span><span class="op">)</span><span class="op">}</span>,
     by<span class="op">=</span><span class="fu">.</span><span class="op">(</span><span class="va">frame</span><span class="op">)</span><span class="op">]</span>

<span class="fu"><a href="https://rdrr.io/pkg/ggplot2/man/qplot.html">qplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">wave.dat</span>,x<span class="op">=</span><span class="va">pos</span>,y<span class="op">=</span><span class="va">l</span><span class="op">)</span></code></pre></div>
<p><img src="tutorial_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Christopher Kenaley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
